{"version":3,"sources":["components/GlobalStore.js","components/NavBar.js","components/Search.js","components/Saved.js","App.js","index.js"],"names":["GlobalData","React","createContext","dispatcher","state","action","type","newState","cartItemIdx","cart","findIndex","item","id","console","log","num","push","GlobalStore","props","useReducer","globalData","dispatch","Provider","value","NavBar","location","useLocation","class","to","className","src","alt","style","width","height","pathname","Search","useState","showBook","setShowBook","txtSearch","useRef","a","fetch","then","result","json","apiBook","book","requestOptions","method","headers","body","JSON","stringify","mybook","booktitle","bookimageLinks","bookinfoLink","bookdescription","bookauthors","for","ref","onClick","event","preventDefault","searchbooks","current","map","volumeInfo","title","imageLinks","smallThumbnail","href","infoLink","description","authors","savebook","Saved","savedBooks","setSavedBooks","loadBooks","viewlink","e","window","assign","target","dataset","majid","data","useEffect","index","image","data-majid","link","_id","deletelink","App","exact","path","component","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.ae0282d2.chunk.js","sourcesContent":["import React, { useContext, useReducer } from \"react\";\r\n\r\n/*\r\n{\r\n    cart: [ { id, num, price }]\r\n}\r\n\r\n\r\n*/\r\nconst GlobalData = React.createContext();\r\n\r\nfunction dispatcher(state,action){\r\nswitch( action.type ){\r\n    /* { type: \"addToCart\", id: [product-id], num: [# product], price} */\r\n    case 'addToCart':\r\n        let newState = {...state};\r\n        // check if item already exists in the cart\r\n        const cartItemIdx = newState.cart.findIndex( item=>item.id==action.id );\r\n        if( cartItemIdx>-1 ){\r\n            console.log( `[dispatcher:${action.type}] cart.num(${newState.cart[cartItemIdx].num}) += (${action.num})` );\r\n            newState.cart[cartItemIdx].num += action.num;\r\n        } else {\r\n            newState.cart.push( { ...action } );\r\n        }\r\n        console.log( `[GlobalStore:addToCart] id(${action.id}) cartItemIdx(${cartItemIdx})`, newState );\r\n        return newState;\r\n\r\n    default:\r\n    console.log( `crap sorry, dunno what to do` );\r\n    break;\r\n}\r\n}\r\n\r\nfunction GlobalStore( props ){\r\n    const [ globalData, dispatch ]= useReducer( dispatcher, { cart: [] } );\r\n    \r\n    return (\r\n        <GlobalData.Provider value={[ globalData, dispatch ]} {...props} />\r\n    )\r\n}\r\n\r\nfunction useGlobalStore(){\r\n    return useContext(GlobalData);\r\n}\r\n\r\nexport { GlobalStore, useGlobalStore };","import React, { useState } from 'react';\r\nimport { Link, useLocation } from \"react-router-dom\";\r\nimport { useGlobalStore } from \"./GlobalStore\";\r\n\r\n/* activePage  | changePage-call-back */\r\nfunction NavBar() {\r\n  const location = useLocation();\r\n\r\n  const style = {\r\n      logo: { width: '64px', height: '64px' }\r\n  }\r\n\r\n  return (\r\n    <nav class=\"navbar navbar-expand-lg navbar-light bg-light\">\r\n      <Link to=\"/\" className=\"navbar-brand\">\r\n          <img src='https://www.dalmio-dent.md/wp-content/uploads/2016/11/Untitled-6.png' alt=\"\" style={style.logo} />\r\n      </Link>\r\n     \r\n      <div id=\"navbarSupportedContent\"> {/* <div className={showClass} id=\"navbarSupportedContent\"></div> */}\r\n        <ul class=\"navbar-nav mr-auto\">\r\n          <li className=\"nav-item\">\r\n            <Link to=\"/search\" className={location.pathname === \"/search\" ? \"nav-link active\" : \"nav-link\"}>\r\n              Search\r\n            </Link>\r\n          </li>  \r\n          <li className=\"nav-item\">\r\n            <Link to=\"/saved\" className={location.pathname === \"/saved\" ? \"nav-link active\" : \"nav-link\"}>\r\n              Saved\r\n            </Link>\r\n          </li>  \r\n        </ul>\r\n      </div>\r\n    </nav>\r\n  );\r\n}\r\n\r\nexport default NavBar;","import React, { useState, useRef } from \"react\";\r\n\r\nfunction Search( props ){\r\n   \r\n    const [ showBook, setShowBook ]= useState([]);\r\n    const txtSearch = useRef();\r\n    \r\n    \r\n    \r\n    function searched(event) {\r\n        event.preventDefault();\r\n        // console.log(txtSearch.current.value);\r\n        searchbooks(txtSearch.current.value);\r\n    }\r\n\r\n\r\n    async function searchbooks( txtSearch ){    \r\n        const apiBook = await fetch(`/api/books/${txtSearch}`).then( result=>result.json() );\r\n        console.log(apiBook)\r\n        setShowBook( apiBook );\r\n    }\r\n\r\n\r\n    async function savebook( book ){    \r\n        // console.log(\"<<executing savebook function inside search component>>\")\r\n        // console.log(book.booktitle);\r\n\r\n        // Simple POST request with a JSON body using fetch\r\n        const requestOptions = {\r\n            method: 'POST',\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify({mybook:{ \r\n                booktitle : book.booktitle,\r\n                bookimageLinks : book.bookimageLinks,\r\n                bookinfoLink : book.bookinfoLink,\r\n                bookdescription : book.bookdescription,\r\n                bookauthors : book.bookauthors \r\n            }})\r\n        };\r\n        const apiBook = await fetch(`/api/books`, requestOptions).then( result=>result.json() );\r\n    }\r\n\r\n    \r\n\r\n    return (\r\n        <>\r\n            \r\n\r\n            <div class=\"row\">\r\n                Book Search\r\n                <br/>\r\n                <form>\r\n                    <div class=\"form-group\">\r\n                        <label for=\"searchtxt\"></label>\r\n                        <input id=\"searchtxt\" type=\"text\" ref={txtSearch} class=\"form-control\"></input>\r\n                    </div>\r\n                    <button onClick={searched} class=\"btn btn-primary submit\">Search</button>\r\n                </form>\r\n            </div>\r\n\r\n            <div class='row'>\r\n                <div class=\"mb-3\">\r\n                    <ul class=\"col-6 list-group\">\r\n                        { showBook.map( book =>\r\n                        <>\r\n                        <li class=\"list-group-item\">{book.volumeInfo.title}</li> \r\n                       \r\n                        <li class=\"list-group-item\"><img src={(book.volumeInfo.imageLinks)?book.volumeInfo.imageLinks.smallThumbnail:'https://placehold.it/100x100'} class='img-thumbnail' /></li> \r\n                        <li class=\"list-group-item\"><a href={book.volumeInfo.infoLink}>link</a></li> \r\n                        <li class=\"list-group-item\">{book.volumeInfo.description}</li> \r\n                        <li class=\"list-group-item\">{book.volumeInfo.authors}</li> \r\n                        {\r\n                            \r\n                        }\r\n                        <button onClick={\r\n                             \r\n                            () => savebook( \r\n                                \r\n                                {\r\n                                    booktitle : book.volumeInfo.title,\r\n                                    bookimageLinks : book.volumeInfo.imageLinks,\r\n                                    bookinfoLink : book.volumeInfo.infoLink,\r\n                                    bookdescription : book.volumeInfo.description,\r\n                                    bookauthors : book.volumeInfo.authors\r\n                                }\r\n\r\n                             )}>Save in Mongo</button>\r\n                        </>\r\n\r\n                        \r\n                        )}\r\n                    </ul>\r\n                </div>\r\n\r\n\r\n                   \r\n            </div>\r\n\r\n\r\n\r\n        </>\r\n    )\r\n}\r\n\r\n\r\nexport default Search;","import React, { useState, useEffect, useRef } from \"react\";\r\n\r\n\r\nfunction Saved( props ){\r\n    const [ savedBooks, setSavedBooks ]= useState([]);\r\n    \r\n    // load only ONCE at component load\r\n    var savedbooksapi = [];\r\n    useEffect( function(){\r\n        loadBooks();\r\n    }, [] );\r\n\r\n    ;\r\n    async function loadBooks( ){    \r\n        const apiBook = await fetch(`/api/books`).then( result=>result.json() );\r\n        setSavedBooks(apiBook)\r\n    }\r\n\r\n    function viewlink(e){\r\n        // console.log(myid.current[0]);\r\n        window.location.assign(e.target.dataset.majid);\r\n\r\n    }\r\n\r\n    async function deletelink(e, data){\r\n\r\n        console.log(e);console.log(data);\r\n\r\n        const requestOptions = {\r\n            method: 'DELETE',\r\n            headers: { 'Content-Type': 'application/json' }\r\n        };\r\n\r\n        const deleteResult = await fetch(`/api/books/`+data, requestOptions).then( result=>result.json() );\r\n        if (deleteResult) loadBooks();\r\n    }\r\n    \r\n\r\n    return (\r\n        <>\r\n                <div class=\"mb-3\">\r\n                    <ul class=\"col-6 list-group\">\r\n                        { savedBooks.map( (book, index) =>\r\n                        <>\r\n                            <li class=\"list-group-item\">{book.title}</li> \r\n                            <li class=\"list-group-item\"><img src={book.image} alt=\"\" class='img-thumbnail' /></li> \r\n                            {/* <li class=\"list-group-item\"><a href={book.link} class='img-thumbnail'>view</a></li>  */}\r\n                            <li class=\"list-group-item\"><button data-majid={book.link} onClick={viewlink}>View</button></li> \r\n                            <li class=\"list-group-item\"><button data-majid={book._id} onClick={(e)=>deletelink(e,book._id)}>Delete</button></li> \r\n                            <li class=\"list-group-item\">{book.authors}</li> \r\n                            <li class=\"list-group-item\">{book.description}</li> \r\n                        </>\r\n                        )}\r\n                    </ul>\r\n                </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Saved;","import React from 'react';\r\nimport { BrowserRouter as Router, Route } from \"react-router-dom\";\r\n\r\nimport { GlobalStore } from \"./components/GlobalStore\";\r\n\r\nimport NavBar from './components/NavBar';\r\nimport Search from './components/Search';\r\nimport Saved from './components/Saved';\r\n\r\nfunction App() {\r\n  return (\r\n    <Router>\r\n      <GlobalStore> {/* provides common elements across components */}\r\n      <div className=\"App\">\r\n          <NavBar />\r\n          <div class=\"container\">\r\n            <Route exact path={[\"/\",\"/search\"]} component={Search} />\r\n            <Route path=\"/saved\" component={Saved} />\r\n            {/* <Route path=\"/productinfo/:id\" component={Saved} /> */}\r\n          </div>\r\n      </div>\r\n      </GlobalStore>\r\n    </Router>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}